# シナリオ自動変換AIソフトウェア アーキテクチャ設計書

## 1. はじめに

本ドキュメントは、UE5ゲーム開発におけるシナリオ自動変換AIソフトウェアのアーキテクチャを定義するものである。

## 2. システム概要

本ソフトウェアは、ユーザーが作成したシナリオ（テキスト形式）をAIが解析し、フローチャート（draw.io形式）とUE5のデータテーブル（CSV形式）を自動生成する。

## 3. アーキテクチャ

主要なコンポーネントは以下の通りである。

- **シナリオ入力インターフェース:** ユーザーがシナリオファイル（.txtなど）をアップロードするためのUI。
- **シナリオ解析AIモジュール:** 自然言語処理（NLP）技術を用いて、シナリオの構造（登場人物、セリフ、分岐、イベントなど）を解析する。
- **フローチャート生成モジュール:** 解析されたシナリオ構造に基づき、draw.ioで読み込み可能なXMLファイルを生成する。
- **データテーブル生成モジュール:** 解析されたシナリオ構造に基づき、UE5でインポート可能なCSVファイルを生成する。
- **出力インターフェース:** 生成されたフローチャートファイルとデータテーブルファイルをユーザーがダウンロードするためのUI。

### 3.1. シナリオ解析AIモジュール

- **入力:** テキスト形式のシナリオファイル
- **処理:**
    1. テキストを文単位、単語単位に分割する。
    2. 登場人物、セリフ、場所、時間、選択肢などの要素を固有表現抽出（NER）やルールベースの手法で特定する。
    3. シナリオの分岐構造を解析し、シーン間の繋がりを特定する。
- **出力:** シナリオの構造化データ（JSON形式などを想定）

### 3.2. フローチャート生成モジュール

- **入力:** シナリオの構造化データ
- **処理:**
    1. 構造化データから、フローチャートのノード（開始、終了、処理、分岐など）とエッジ（矢印）を定義する。
    2. draw.ioのXMLスキーマに基づき、ノードとエッジの情報をXMLファイルとして書き出す。
- **出力:** draw.io形式のXMLファイル（`.drawio`）

### 3.3. データテーブル生成モジュール

- **入力:** シナリオの構造化データ
- **処理:**
    1. 構造化データから、データテーブルに必要なカラム（例: `ID`, `Character`, `Dialogue`, `BranchTarget1`, `BranchTarget2`など）を定義する。
    2. 各シーンやセリフをデータテーブルの行として、CSV形式で書き出す。
- **出力:** UE5インポート用のCSVファイル

## 4. 技術スタック

- **プログラミング言語:** Python
- **自然言語処理ライブラリ:** spaCy, NLTK, または Transformers (BERTなど)
- **UIフレームワーク:** Streamlit, Gradio, または Flask/ReactなどのWebフレームワーク
- **XML生成:** Python標準の`xml.etree.ElementTree`
- **CSV生成:** Python標準の`csv`

## 5. 開発ステップ

1. **シナリオ解析AIモジュールの開発:** まず、シナリオから基本的な情報を抽出するコア部分を開発する。
2. **フローチャート生成機能の実装:** 抽出した情報をもとに、簡単なフローチャートを生成する機能を実装する。
3. **UE5 Data Table生成機能の実装:** 同様に、データテーブルをCSV形式で出力する機能を実装する。
4. **統合UIとテスト:** 各モジュールを統合し、ユーザーが操作できるUIを構築する。その後、様々なシナリオでテストを行う。
5. **デモンストレーションと成果物の提供:** 完成したソフトウェアのデモを行い、成果物を提供する。


